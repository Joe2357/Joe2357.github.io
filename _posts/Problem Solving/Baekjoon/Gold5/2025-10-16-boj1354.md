---
title: "[BOJ 1354] 무한 수열 2"
author: Joe2357
categories: [Problem Solving, Baekjoon]
tags: [Baekjoon]
uploaded_at: 2025-10-16 13:12:33 +0900
last_modified_at: 2025-10-16 13:12:33 +0900
description: "- 문제풀이"
math: true
---

> 문제 링크 : [https://www.acmicpc.net/problem/1354](https://www.acmicpc.net/problem/1354)


### 문제

<p>무한 수열 A는 다음과 같다.</p>
<ul>
<li>A<sub>i</sub> = 1 (i ≤ 0)</li>
<li>A<sub>i</sub> = A<sub>⌊i/P⌋-X</sub> + A<sub>⌊i/Q⌋-Y</sub> (i ≥ 1)</li>
</ul>
<p>N, P, Q, X, Y가 주어질 때, A<sub>N</sub>을 구하는 프로그램을 작성하시오.</p>



### 입력

<p>첫째 줄에 5개의 정수 N, P, Q, X, Y가 주어진다.</p>



### 출력

<p>첫째 줄에 A<sub>N</sub>을 출력한다.</p>



### 제한

| 시간 제한 | 메모리 제한 |
| :-------: | :---------: |
| 10sec | 512MB |



<ul>
<li>0 ≤ N ≤ 10<sup>13</sup></li>
<li>2 ≤ P, Q ≤ 10<sup>9</sup></li>
<li>0 ≤ X, Y ≤ 10<sup>9</sup></li>
</ul>



### 힌트

<p>⌊x⌋는 x를 넘지 않는 가장 큰 정수이다.</p>



---


### 풀이

[1351번 문제](https://joe2357.github.io/posts/boj1351/)의 강화 버전이다. 수의 범위가 늘어나고, 시간 제한도 2배 증가했다. 사실 크게 어려울 게 없을 거 같아서, 같은 코드를 제출했었다. 하지만 받게 된 채점은 **시간 초과**였다. $-X, -Y$가 추가되었더니 1차원 연결리스트로 탐색하는 것은 불가능해지는 것 같았다.

어짜피 방법론은 똑같은 걸 쓰면서, 계산된 수에 대해 <u>빠른 탐색</u>이 필요한 것 뿐이어서, 수의 저장 방식을 **해시맵**으로 변경하였다. 물론 `C`를 사용하는 입장에서 stl을 사용할 수는 없으니, 저장 방식 자체는 [연결리스트](https://joe2357.github.io/posts/Linked-List/)를 사용해야한다. 해시 개수는 $1\,000\,003$를 임의로 사용했다.




### 소스코드

> Github Link : [Source Code](https://github.com/Joe2357/Baekjoon/blob/master/C/Code/1300/1354.c)
>
> 참고 알고리즘 : 