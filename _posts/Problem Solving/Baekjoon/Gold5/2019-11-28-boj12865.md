---
title: "[BOJ 12865] 평범한 배낭"
author: Joe2357
categories: [Problem Solving, Baekjoon]
tags: [Baekjoon]
uploaded_at: 2019-11-28 15:06:16 +0900
last_modified_at: 2023-01-31 15:12:34 +0900
description: "- 문제풀이"
math: true
---

> 문제 링크 : [https://www.acmicpc.net/problem/12865](https://www.acmicpc.net/problem/12865)


### 문제

<p>이 문제는 아주 평범한 배낭에 관한 문제이다.</p>
<p><span style="line-height:1.6em">한 달 후면 국가의 부름을 받게 되는 준서는 여행을 가려고 한다. 세상과의 단절을 슬퍼하며 최대한 즐기기 위한 여행이기 때문에, 가지고 다닐 배낭 또한 최대한 가치 있게 싸려고 한다.</span></p>
<p><span style="line-height:1.6em">준서가 여행에 필요하다고 생각하는 N개의 물건이 있다. 각 물건은 무게 W와 가치 V를 가지는데, 해당 물건을 배낭에 넣어서 가면 준서가 V만큼 즐길 수 있다. 아직 행군을 해본 적이 없는 준서는 최대 K만큼의 무게만을 넣을 수 있는 배낭만 들고 다닐 수 있다. 준서가 최대한 즐거운 여행을 하기 위해 배낭에 넣을 수 있는 물건들의 가치의 최댓값을 알려주자.</span></p>



### 입력

<p>첫 줄에 물품의 수 N(1 ≤ N ≤ 100)과 준서가 버틸 수 있는 무게 K(1 ≤ K ≤ 100,000)가 주어진다. 두 번째 줄부터 N개의 줄에 거쳐 각 물건의 무게 W(1 ≤ W ≤ 100,000)와 해당 물건의 가치 V(0 ≤ V ≤ 1,000)가 주어진다.</p>
<p>입력으로 주어지는 모든 수는 정수이다.</p>



### 출력

<p>한 줄에 배낭에 넣을 수 있는 물건들의 가치합의 최댓값을 출력한다.</p>



### 제한

| 시간 제한 | 메모리 제한 |
| :-------: | :---------: |
| 2sec | 512MB |



---


### 풀이

$N$개의 물건 각각의 무게 $W$와 가치 $V$가 주어질 때, 배낭의 최대 용량 $K$를 넘지 않으면서 담을 수 있는 가치의 최댓값을 구하는 문제다. 각 물건을 한 번씩만 선택할 수 있는 전형적인 **0/1 배낭 문제(Knapsack Problem)**로, [다이나믹 프로그래밍](https://en.wikipedia.org/wiki/Dynamic_programming)을 통해 해결할 수 있다.

가장 기본적인 접근은 $2$차원 배열 $DP[i][j]$를 사용하여 "첫 번째부터 $i$번째 물건까지 고려했을 때, 무게 합이 $j$인 경우의 최대 가치"를 구하는 것이다. 하지만 무게 제한 $K$가 최대 $100\,000$이고 물건의 수 $N$이 $100$이므로, $2$차원 배열을 사용하면 메모리 낭비가 클 수 있다.

소스 코드에서는 이를 최적화하여 **$1$차원 배열**을 사용하는 방식을 취했다. $1$차원 배열 $DP[j]$를 "무게 합이 $j$일 때의 최대 가치"로 정의하고, 각 물건마다 배열을 업데이트한다. 이때 중요한 점은 배열을 **오른쪽(큰 무게)에서 왼쪽(작은 무게)**으로 업데이트해야 한다는 것이다. 왼쪽부터 업데이트할 경우, 같은 루프 안에서 방금 담은 물건을 또 담는 오류(중복 선택)가 발생할 수 있기 때문이다.

물건 $i$의 무게를 $W_i$, 가치를 $V_i$라고 할 때 점화식은 다음과 같다.




$$
DP[j] = \max(DP[j], DP[j - W_i] + V_i)
$$




전체 시간 복잡도는 $O(NK)$이며, 이 문제에서는 최대 $100 \times 100\,000 = 10\,000\,000$번의 연산이 수행된다. 이는 시간 제한 $2$초 내에 매우 여유롭게 통과 가능한 수준이다. 결과적으로 $DP[K]$ 값을 출력함으로써 배낭에 담을 수 있는 가치의 최댓값을 얻을 수 있다.

자세한 설명은 [냅색 알고리즘](https://joe2357.github.io/posts/Knapsack/)을 참고하자.

### 소스코드

> Github Link : [Source Code](https://github.com/Joe2357/Baekjoon/blob/master/C/Code/12800/12865.c)
>
> 참고 알고리즘 : [다이나믹 프로그래밍](https://en.wikipedia.org/wiki/Dynamic_programming), [냅색 알고리즘](https://joe2357.github.io/posts/Knapsack/)