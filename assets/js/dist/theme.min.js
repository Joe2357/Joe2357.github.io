var Theme = (function () {
    "use strict";

    class Theme {
        static get DARK() { return "dark"; }
        static get LIGHT() { return "light"; }
        static get ID() { return "theme-mode"; }

        static init() {
            // 세션 저장값 복원 (없으면 기본 light)
            const saved = sessionStorage.getItem("theme-mode");
            this._current = saved || this.LIGHT;
            document.documentElement.setAttribute("data-mode", this._current);
            console.log("[Theme] initialized:", this._current);
        }

        static get visualState() {
            return this._current;
        }

        static flip() {
            // light ↔ dark 토글
            this._current =
                this._current === this.LIGHT ? this.DARK : this.LIGHT;

            document.documentElement.setAttribute("data-mode", this._current);
            sessionStorage.setItem("theme-mode", this._current);

            this.broadcast();
            console.log("[Theme] flipped to:", this._current);
        }

        static broadcast() {
            // 테마 변경 신호
            window.postMessage({ id: this.ID }, "*");
        }

        static getThemeMapper(lightValue, darkValue) {
            return { [this.LIGHT]: lightValue, [this.DARK]: darkValue };
        }
    }

    Theme.init();
    return Theme;
})();
